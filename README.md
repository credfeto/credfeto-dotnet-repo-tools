# credfeto-dotnet-repo-tools

Dotnet/C# repository tools

## Running (Package Update)

Updates all the packages specified in the ``packages.json`` file in the repositories in ``repos.txt``.

* ``release.json`` defines the configuration for generating releases when multiple packages have been updated
* the template repo specified by ``--template`` is excluded from ``repos.txt`` if it is present
 
```bash
dotnet updaterepo \
    update-packages \
    --repositories ~/work/personal/auto-update-config/personal/repos.lst \
    --work ~/temp \
    --tracking ~/temp/tracking.json \
    --cache ~/temp/cache.json \
    --packages ~/work/personal/auto-update-config/packages.json \
    --template git@github.com:credfeto/cs-template.git \
    --release ~/work/personal/auto-update-config/release.json
```

## Running (Template Update)

Updates common files in a repository to match the files defined template repository specified by ``--template``.

```bash
dotnet updaterepo \
    update-template \
    --repositories ~/work/personal/auto-update-config/personal/repos.lst \
    --work ~/temp \
    --tracking ~/temp/tracking.json \
    --packages ~/work/personal/auto-update-config/packages.json \
    --template git@github.com:credfeto/cs-template.git \
    --release ~/work/personal/auto-update-config/release.json
```

## Running (Code Cleanup)

TODO - this is not yet implemented

```bash
dotnet updaterepo \
    code-cleanup \
    --repositories ~/work/personal/auto-update-config/personal/repos.lst \
    --work ~/temp \
    --tracking ~/temp/tracking.json
```

## File formats

### repos.lst

One line per repo to process e.g:

```text
git@github.com:credfeto/repo1.git
git@github.com:credfeto/repo2.git
git@github.com:credfeto/repo3.git
```

### tracking.json

This is generated by the tool

### cache.json

This is generated by the tool

### packages.json

```json
TODO
```

### release.json

```json
TODO
```

## Build Status

| Branch  | Status                                                                                                                                                                                                                                                    |
|---------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| main    | [![Build: Pre-Release](https://github.com/credfeto/credfeto-dotnet-repo-tools/actions/workflows/build-and-publish-pre-release.yml/badge.svg)](https://github.com/credfeto/credfeto-dotnet-repo-tools/actions/workflows/build-and-publish-pre-release.yml) |
| release | [![Build: Release](https://github.com/credfeto/credfeto-dotnet-repo-tools/actions/workflows/build-and-publish-release.yml/badge.svg)](https://github.com/credfeto/credfeto-dotnet-repo-tools/actions/workflows/build-and-publish-release.yml)             |

## Changelog

View [changelog](CHANGELOG.md)

## Contributors

<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->

<!-- markdownlint-restore -->
<!-- prettier-ignore-end -->

<!-- ALL-CONTRIBUTORS-LIST:END -->